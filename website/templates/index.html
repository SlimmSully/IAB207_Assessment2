{% extends 'base.html' %}
{% block content %}

<!-- ===== Carousel ===== -->
<div id="mainCarousel" class="carousel slide carousel-fade mb-5" data-bs-ride="carousel">
  <div class="carousel-inner">
    {% for event in carousel_events %}
      <div class="carousel-item {% if loop.first %}active{% endif %}">
        <img src="{{ url_for('static', filename='img/' + event.img) }}" 
             class="d-block w-100 carousel-image" 
             alt="{{ event.title }}">
        <div class="carousel-caption d-none d-md-block bg-dark bg-opacity-50 rounded p-3">
          <h5>{{ event.title }}</h5>
          <p>{{ event.description[:100] }}...</p>
        </div>
      </div>
    {% endfor %}
  </div>
  <button class="carousel-control-prev" type="button" data-bs-target="#mainCarousel" data-bs-slide="prev">
    <span class="carousel-control-prev-icon" aria-hidden="true"></span>
  </button>
  <button class="carousel-control-next" type="button" data-bs-target="#mainCarousel" data-bs-slide="next">
    <span class="carousel-control-next-icon" aria-hidden="true"></span>
  </button>
</div>

<!-- ===== Filter Dropdown ===== -->
<div class="container mb-4">
  <form method="get" class="d-flex justify-content-end">
    <select name="genre" class="form-select w-auto" onchange="this.form.submit()">
      <option value="All">All Genres</option>
      {% for genre in genres %}
        <option value="{{ genre }}" {% if selected_genre == genre %}selected{% endif %}>
          {{ genre }}
        </option>
      {% endfor %}
    </select>
  </form>
</div>

<!-- ===== Event Cards ===== -->
<div class="events-container">
  <h2 class="mb-4 text-center">Upcoming Events</h2>
  <div class="row row-cols-1 row-cols-md-3 g-4">
    {% for event in events %}
      <div class="col">
        <div class="card h-100 shadow-sm">
          <img src="{{ url_for('static', filename='img/' + event.img) }}" 
               class="card-img-top" 
               alt="{{ event.title }}">
          <div class="card-body">
            <h5 class="card-title">{{ event.title }}</h5>
            <p class="card-text">{{ event.description }}</p>
          </div>
          <div class="card-footer bg-transparent">
            <a href="{{ url_for('main.event_detail', event_id=event.event_id) }}" 
               class="btn btn-primary w-100">View Details</a>
          </div>
        </div>
      </div>
    {% endfor %}
  </div>
</div>

{% endblock %}
